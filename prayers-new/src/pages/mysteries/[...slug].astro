---
import { getCollection, render } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const mysteries = await getCollection('mysteries');
  const sortedMysteries = mysteries.sort((a, b) => (a.data.order || 99) - (b.data.order || 99));

  return sortedMysteries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);
---

<BaseLayout title={entry.data.title}>
  <article class="mystery">
    <h1>{entry.data.title}</h1>
    <Content />
  </article>

  <div class="mystery-copyright">
    <p>Scripture texts in this work are taken from the 
    <em>New American Bible, revised edition</em> 
    Â© 2010, 1991, 1986, 1970 Confraternity of Christian Doctrine, 
    Washington, D.C. and are used by permission of the copyright owner. 
    All Rights Reserved. No part of the <em>New American Bible</em> 
    may be reproduced in any form without permission in writing from 
    the copyright owner.</p>
  </div>
</BaseLayout>
